<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: dev_tips | I'm Anson]]></title>
  <link href="http://imsg.github.io/blog/categories/dev-tips/atom.xml" rel="self"/>
  <link href="http://imsg.github.io/"/>
  <updated>2013-12-08T21:43:39+08:00</updated>
  <id>http://imsg.github.io/</id>
  <author>
    <name><![CDATA[Anson Zhao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Set toolbar items programmably]]></title>
    <link href="http://imsg.github.io/blog/2013/11/22/set-toolbar-items-programmably/"/>
    <updated>2013-11-22T12:17:00+08:00</updated>
    <id>http://imsg.github.io/blog/2013/11/22/set-toolbar-items-programmably</id>
    <content type="html"><![CDATA[<p>今天在做动态设置UIToolbar中的items的时候发现一个问题，要求是在UITableView在editing状态和非editing状态下切换toolbar的items。</p>

<p>以下是之前实现的方式
<code>objc
// toolbar
UIBarButtonItem *spaceItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
self.navigationController.toolbar.items = @[self.markButton, spaceItem, self.moveButton, spaceItem, self.trashButton];
</code></p>

<!--more-->


<p>在此代码运行的时候，如果当前的view controller已经不是代码的view controller时，这段代码依然会执行，从而把当前view controller的toolbar给更新了，导致toolbar乱了。</p>

<p>查了一下UIViewController的API，发现其自带设置toolbar item的方法：<code>- (void)setToolbarItems:(NSArray *)toolbarItems animated:(BOOL)animated</code></p>

<p>以下为修改后的代码，只在代码所属的UIViewController中设置toolbar items。
```objc</p>

<pre><code>// toolbar
UIBarButtonItem *spaceItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
[self setToolbarItems:@[self.markButton, spaceItem, self.moveButton, spaceItem, self.trashButton] animated:YES];
</code></pre>

<p>```</p>
]]></content>
  </entry>
  
</feed>
